<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduQuery SG - Singapore Schools Database</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
            <rect width="32" height="32" rx="8" fill="#0066FF"/>
            <path d="M16 8L22 12V20L16 24L10 20V12L16 8Z" fill="white"/>
          </svg>
          <h1>EduQuery SG</h1>
        </div>
        <nav class="nav">
          <button class="nav-btn active" data-view="search">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M9 2a7 7 0 015.618 11.176l4.1 4.1a1 1 0 01-1.414 1.414l-4.1-4.1A7 7 0 119 2zm0 2a5 5 0 100 10 5 5 0 000-10z"/>
            </svg>
            Search
          </button>
          <button class="nav-btn" data-view="manage" onclick="switchView('manage')">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"/>
            </svg>
            Manage
          </button>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <div class="container">
      
      <!-- Search View -->
      <div id="searchView" class="view active">
        <!-- Search Section -->
        <section class="search-section">
          <div class="search-card">
            <h2 class="section-title">Find Schools in Singapore</h2>
            <p class="section-subtitle">Search by school name and explore subjects, CCAs, programmes & more</p>
            
            <div class="search-controls">
              <div class="search-input-wrapper">
                <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M9 2a7 7 0 015.618 11.176l4.1 4.1a1 1 0 01-1.414 1.414l-4.1-4.1A7 7 0 119 2zm0 2a5 5 0 100 10 5 5 0 000-10z"/>
                </svg>
                <input type="text" id="searchBox" class="search-input" placeholder="Enter school name (e.g., Raffles, Anderson)">
              </div>
              
              <div class="filter-group">
                <label for="queryType" class="filter-label">Query Type</label>
                <select id="queryType" class="filter-select">
                  <option value="all">General Info</option>
                  <option value="subjects">Subjects</option>
                  <option value="ccas">CCAs</option>
                  <option value="programmes">Programmes</option>
                  <option value="distinctives">Distinctives (ALP/LLP)</option>
                </select>
              </div>
              
              <button onclick="runQuery()" class="btn-primary">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M9 2a7 7 0 015.618 11.176l4.1 4.1a1 1 0 01-1.414 1.414l-4.1-4.1A7 7 0 119 2zm0 2a5 5 0 100 10 5 5 0 000-10z"/>
                </svg>
                Search
              </button>
            </div>
          </div>
        </section>

        <!-- Results Section -->
        <section class="results-section">
          <div class="results-header">
            <h2 class="section-title">Results</h2>
            <div id="resultsMeta" class="results-meta"></div>
          </div>
          
          <div id="loadingSpinner" class="loading-spinner" style="display: none;">
            <div class="spinner"></div>
            <p>Searching database...</p>
          </div>
          
          <div id="resultsTable" class="results-container">
            <div class="empty-state">
              <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                <circle cx="32" cy="32" r="30" stroke="#E5E7EB" stroke-width="4"/>
                <path d="M32 20v24M20 32h24" stroke="#E5E7EB" stroke-width="4" stroke-linecap="round"/>
              </svg>
              <h3>No search performed yet</h3>
              <p>Enter a school name and select a query type to begin</p>
            </div>
          </div>
        </section>
      </div>

      <!-- Manage View -->
      <div id="manageView" class="view">
        <section class="manage-section">
          <div class="manage-header">
            <div>
              <h2 class="section-title">Manage Schools</h2>
              <p class="section-subtitle">Add new schools to the database</p>
            </div>
            <button onclick="showAddModal()" class="btn-primary">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"/>
              </svg>
              Add New School
            </button>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon" style="background: #DBEAFE;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="#2563EB">
                  <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
                </svg>
              </div>
              <div class="stat-content">
                <h3 class="stat-label">Total Schools</h3>
                <p class="stat-value" id="totalSchools">-</p>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon" style="background: #DCFCE7;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="#16A34A">
                  <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
              </div>
              <div class="stat-content">
                <h3 class="stat-label">Recent Additions</h3>
                <p class="stat-value">0</p>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon" style="background: #FEF3C7;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="#CA8A04">
                  <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
                </svg>
              </div>
              <div class="stat-content">
                <h3 class="stat-label">Last Updated</h3>
                <p class="stat-value">Today</p>
              </div>
            </div>
          </div>

          <div class="info-card">
            <div>
              <h4>Database Management</h4>
              <p>Add new schools to the EduQuery database. All fields are required to ensure data integrity. Changes are saved immediately to both PostgreSQL and MongoDB.</p>
            </div>
          </div>
        </section>
      </div>

    </div>
  </main>

  <!-- Add School Modal -->
  <div id="addModal" class="modal">
    <div class="modal-overlay" onclick="hideAddModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Add New School</h3>
        <button class="modal-close" onclick="hideAddModal()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      
      <form id="addSchoolForm" onsubmit="addSchool(event)">
        <div class="form-grid">
          <div class="form-group">
            <label for="schoolName">School Name *</label>
            <input type="text" id="schoolName" required placeholder="e.g., Anderson Secondary School">
          </div>

          <div class="form-group">
            <label for="principalName">Principal Name *</label>
            <input type="text" id="principalName" required placeholder="e.g., Mrs. Tan Bee Leng">
          </div>

          <div class="form-group full-width">
            <label for="address">Address *</label>
            <input type="text" id="address" required placeholder="e.g., 4650 Ang Mo Kio Avenue 6">
          </div>

          <div class="form-group">
            <label for="postalCode">Postal Code *</label>
            <input type="text" id="postalCode" required pattern="[0-9]{6}" placeholder="e.g., 569842">
            <span class="form-hint">6 digits</span>
          </div>

          <div class="form-group">
            <label for="zoneCode">Zone Code *</label>
            <select id="zoneCode" required>
              <option value="">Select zone...</option>
              <option value="NORTH">North</option>
              <option value="SOUTH">South</option>
              <option value="EAST">East</option>
              <option value="WEST">West</option>
              <option value="CENTRAL">Central</option>
            </select>
          </div>

          <div class="form-group full-width">
            <label for="mainlevelCode">Main Level *</label>
            <select id="mainlevelCode" required>
              <option value="">Select level...</option>
              <option value="PRIMARY">Primary</option>
              <option value="SECONDARY">Secondary</option>
              <option value="JUNIOR COLLEGE">Junior College</option>
              <option value="CENTRALISED INSTITUTE">Centralised Institute</option>
            </select>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn-secondary" onclick="hideAddModal()">Cancel</button>
          <button type="submit" class="btn-primary">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
            </svg>
            Save School
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast">
    <div class="toast-content">
      <span id="toastMessage"></span>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>INF2003 Database Systems Project • Built with PostgreSQL (Supabase) + MongoDB Atlas</p>
      <p class="footer-links">
        <a href="#" onclick="showAbout(); return false;">About</a>
        <span>•</span>
        <a href="#" onclick="showHelp(); return false;">Help</a>
      </p>
    </div>
  </footer>

  <script src="script.js"></script>
</body>
</html>